import{Signal as e,signal as n,computed as t,effect as r}from"@preact/signals-core";import o,{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED as i,useRef as u,useMemo as f,useEffect as c}from"react";import{useSyncExternalStore as l}from"use-sync-external-store/shim/index.js";import s from"react/jsx-runtime";import a from"react/jsx-dev-runtime";let m=null,p=!1,b=null;const d=new Map;function g(e){if(!e)return 1;const n=d.get(e);if(void 0!==n)return n;let t;const r=e.useCallback.toString();if(e.useReducer===e.useEffect)t=1;else if(e.useEffect===e.useImperativeHandle)t=32;else if(/Invalid/.test(r))t=2;else if(/updateCallback/.test(r)||/\[0\]/.test(r)&&/\[1\]/.test(r)){let n=e.useReducer.toString();if(/rerenderReducer/.test(n)||/return\s*\[\w+,/.test(n))t=16;else t=8}else t=4;d.set(e,t);return t}function v(){Object.defineProperty(i.ReactCurrentDispatcher,"current",{get:()=>b,set(e){if(p){b=e;return}const n=g(b),t=g(e);b=e;if(function(e,n){if(1&e&&28&n)return!0;else if(2&e||2&n)return!1;else if(16&n)return!0;else return!1}(n,t)){p=!0;m=k();p=!1}else if(function(e,n){return Boolean(28&e&&1&n)}(n,t)){var r;null==(r=m)||r.f();m=null}}});!function(){const e=s,n=a;o.createElement=j(o.createElement);n.jsx&&(n.jsx=j(n.jsx));e.jsx&&(e.jsx=j(e.jsx));n.jsxs&&(n.jsxs=j(n.jsxs));e.jsxs&&(e.jsxs=j(e.jsxs));n.jsxDEV&&(n.jsxDEV=j(n.jsxDEV));e.jsxDEV&&(e.jsxDEV=j(e.jsxDEV))}()}const y=[],h=Symbol.for("react.element");function j(n){if("function"!=typeof n)return n;else return function(t,r,...o){if("string"==typeof t&&r)for(let n in r){let t=r[n];if("children"!==n&&t instanceof e)r[n]=t.value}return n.call(n,t,r,...o)}}const x=Symbol.dispose||Symbol.for("Symbol.dispose");let S;function w(e){if(S)S();S=e&&e.effect.S()}const O=()=>w();let P;const $=Promise.prototype.then.bind(Promise.resolve());function k(){O();if(!P)P=$(()=>{P=void 0;O()});const e=u();if(null==e.current)e.current=function(){let e,n,t=0,o=r(function(){e=this});e.c=function(){t=t+1|0;if(n)n()};return{effect:e,subscribe(e){n=e;return function(){t=t+1|0;n=void 0;o()}},getSnapshot:()=>t,f(){O()},[x](){O()}}}();const n=e.current;l(n.subscribe,n.getSnapshot,n.getSnapshot);w(n);return n}Object.defineProperties(e.prototype,{$$typeof:{configurable:!0,value:h},type:{configurable:!0,value:function({data:e}){return e.value}},props:{configurable:!0,get(){return{data:this}}},ref:{configurable:!0,value:null}});function useSignal(e){return f(()=>n(e),y)}function useComputed(e){const n=u(e);n.current=e;return f(()=>t(()=>n.current()),y)}function useSignalEffect(e){const n=u(e);n.current=e;c(()=>r(()=>n.current()),y)}export{v as installAutoSignalTracking,useComputed,useSignal,useSignalEffect,k as useSignals,j as wrapJsx};//# sourceMappingURL=runtime.mjs.map
