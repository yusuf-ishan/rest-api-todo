var e=require("@preact/signals-core"),n=require("react"),r=require("use-sync-external-store/shim/index.js"),t=require("react/jsx-runtime"),u=require("react/jsx-dev-runtime");function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=/*#__PURE__*/i(n),f=/*#__PURE__*/i(t),c=/*#__PURE__*/i(u),a=[],l=Symbol.for("react.element");Promise.prototype.then.bind(Promise.resolve());Object.defineProperties(e.Signal.prototype,{$$typeof:{configurable:!0,value:l},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var s=Symbol.for("react.element");function v(n){if("function"!=typeof n)return n;else return function(r,t){if("string"==typeof r&&t)for(var u in t){var i=t[u];if("children"!==u&&i instanceof e.Signal)t[u]=i.value}return n.call.apply(n,[n,r,t].concat([].slice.call(arguments,2)))}}var p,b=Symbol.dispose||Symbol.for("Symbol.dispose");function d(e){if(p)p();p=e&&e.effect.S()}var g,m=function(){return d()},x=Promise.prototype.then.bind(Promise.resolve());Object.defineProperties(e.Signal.prototype,{$$typeof:{configurable:!0,value:s},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var y=null,j=!1,h=null,S=new Map;function q(e){if(!e)return 1;var n,r=S.get(e);if(void 0!==r)return r;var t=e.useCallback.toString();if(e.useReducer===e.useEffect)n=1;else if(e.useEffect===e.useImperativeHandle)n=32;else if(/Invalid/.test(t))n=2;else if(/updateCallback/.test(t)||/\[0\]/.test(t)&&/\[1\]/.test(t)){var u=e.useReducer.toString();if(/rerenderReducer/.test(u)||/return\s*\[\w+,/.test(u))n=16;else n=8}else n=4;S.set(e,n);return n}!function(){Object.defineProperty(n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return h},set:function(t){if(!j){var u=q(h),i=q(t);h=t;if(function(e,n){if(1&e&&28&n)return!0;else if(2&e||2&n)return!1;else if(16&n)return!0;else return!1}(u,i)){j=!0;y=function(){m();if(!g)g=x(function(){g=void 0;m()});var t=n.useRef();if(null==t.current)t.current=function(){var n,r,t,u=0,i=e.effect(function(){r=this});r.c=function(){u=u+1|0;if(t)t()};return(n={effect:r,subscribe:function(e){t=e;return function(){u=u+1|0;t=void 0;i()}},getSnapshot:function(){return u},f:function(){m()}})[b]=function(){m()},n}();var u=t.current;r.useSyncExternalStore(u.subscribe,u.getSnapshot,u.getSnapshot);d(u);return u}();j=!1}else if(function(e,n){return Boolean(28&e&&1&n)}(u,i)){var o;null==(o=y)||o.f();y=null}}else h=t}});!function(){var e=f,n=c;o.createElement=v(o.createElement);n.jsx&&(n.jsx=v(n.jsx));e.jsx&&(e.jsx=v(e.jsx));n.jsxs&&(n.jsxs=v(n.jsxs));e.jsxs&&(e.jsxs=v(e.jsxs));n.jsxDEV&&(n.jsxDEV=v(n.jsxDEV));e.jsxDEV&&(e.jsxDEV=v(e.jsxDEV))}()}();exports.Signal=e.Signal;exports.batch=e.batch;exports.computed=e.computed;exports.effect=e.effect;exports.signal=e.signal;exports.untracked=e.untracked;exports.useComputed=function(r){var t=n.useRef(r);t.current=r;return n.useMemo(function(){return e.computed(function(){return t.current()})},a)};exports.useSignal=function(r){return n.useMemo(function(){return e.signal(r)},a)};exports.useSignalEffect=function(r){var t=n.useRef(r);t.current=r;n.useEffect(function(){return e.effect(function(){return t.current()})},a)};//# sourceMappingURL=signals.js.map
