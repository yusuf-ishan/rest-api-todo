!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@preact/signals-core"),require("react"),require("use-sync-external-store/shim/index.js"),require("react/jsx-runtime"),require("react/jsx-dev-runtime")):"function"==typeof define&&define.amd?define(["exports","@preact/signals-core","react","use-sync-external-store/shim/index.js","react/jsx-runtime","react/jsx-dev-runtime"],n):n((e||self).reactSignals={},e.preactSignalsCore,e.react,e.index_js,e.a,e.s)}(this,function(e,n,r,t,u,i){function f(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=/*#__PURE__*/f(r),c=/*#__PURE__*/f(u),l=/*#__PURE__*/f(i),a=[],s=Symbol.for("react.element");Promise.prototype.then.bind(Promise.resolve());Object.defineProperties(n.Signal.prototype,{$$typeof:{configurable:!0,value:s},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var v=Symbol.for("react.element");function d(e){if("function"!=typeof e)return e;else return function(r,t){if("string"==typeof r&&t)for(var u in t){var i=t[u];if("children"!==u&&i instanceof n.Signal)t[u]=i.value}return e.call.apply(e,[e,r,t].concat([].slice.call(arguments,2)))}}var p,b=Symbol.dispose||Symbol.for("Symbol.dispose");function m(e){if(p)p();p=e&&e.effect.S()}var y,g=function(){return m()},j=Promise.prototype.then.bind(Promise.resolve());Object.defineProperties(n.Signal.prototype,{$$typeof:{configurable:!0,value:v},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var x=null,h=!1,S=null,q=new Map;function P(e){if(!e)return 1;var n,r=q.get(e);if(void 0!==r)return r;var t=e.useCallback.toString();if(e.useReducer===e.useEffect)n=1;else if(e.useEffect===e.useImperativeHandle)n=32;else if(/Invalid/.test(t))n=2;else if(/updateCallback/.test(t)||/\[0\]/.test(t)&&/\[1\]/.test(t)){var u=e.useReducer.toString();if(/rerenderReducer/.test(u)||/return\s*\[\w+,/.test(u))n=16;else n=8}else n=4;q.set(e,n);return n}!function(){Object.defineProperty(r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return S},set:function(e){if(!h){var u=P(S),i=P(e);S=e;if(function(e,n){if(1&e&&28&n)return!0;else if(2&e||2&n)return!1;else if(16&n)return!0;else return!1}(u,i)){h=!0;x=function(){g();if(!y)y=j(function(){y=void 0;g()});var e=r.useRef();if(null==e.current)e.current=function(){var e,r,t,u=0,i=n.effect(function(){r=this});r.c=function(){u=u+1|0;if(t)t()};return(e={effect:r,subscribe:function(e){t=e;return function(){u=u+1|0;t=void 0;i()}},getSnapshot:function(){return u},f:function(){g()}})[b]=function(){g()},e}();var u=e.current;t.useSyncExternalStore(u.subscribe,u.getSnapshot,u.getSnapshot);m(u);return u}();h=!1}else if(function(e,n){return Boolean(28&e&&1&n)}(u,i)){var f;null==(f=x)||f.f();x=null}}else S=e}});!function(){var e=c,n=l;o.createElement=d(o.createElement);n.jsx&&(n.jsx=d(n.jsx));e.jsx&&(e.jsx=d(e.jsx));n.jsxs&&(n.jsxs=d(n.jsxs));e.jsxs&&(e.jsxs=d(e.jsxs));n.jsxDEV&&(n.jsxDEV=d(n.jsxDEV));e.jsxDEV&&(e.jsxDEV=d(e.jsxDEV))}()}();e.Signal=n.Signal;e.batch=n.batch;e.computed=n.computed;e.effect=n.effect;e.signal=n.signal;e.untracked=n.untracked;e.useComputed=function(e){var t=r.useRef(e);t.current=e;return r.useMemo(function(){return n.computed(function(){return t.current()})},a)};e.useSignal=function(e){return r.useMemo(function(){return n.signal(e)},a)};e.useSignalEffect=function(e){var t=r.useRef(e);t.current=e;r.useEffect(function(){return n.effect(function(){return t.current()})},a)}});//# sourceMappingURL=signals.min.js.map
