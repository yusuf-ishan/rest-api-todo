import{Signal as e,signal as n,computed as t,effect as r}from"@preact/signals-core";export{Signal,batch,computed,effect,signal,untracked}from"@preact/signals-core";import o,{useMemo as i,useRef as u,useEffect as f,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED as c}from"react";import{useSyncExternalStore as l}from"use-sync-external-store/shim/index.js";import s from"react/jsx-runtime";import a from"react/jsx-dev-runtime";var m=[],p=Symbol.for("react.element");Promise.prototype.then.bind(Promise.resolve());Object.defineProperties(e.prototype,{$$typeof:{configurable:!0,value:p},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});function useSignal(e){return i(function(){return n(e)},m)}function useComputed(e){var n=u(e);n.current=e;return i(function(){return t(function(){return n.current()})},m)}function useSignalEffect(e){var n=u(e);n.current=e;f(function(){return r(function(){return n.current()})},m)}const b=Symbol.for("react.element");function g(n){if("function"!=typeof n)return n;else return function(t,r,...o){if("string"==typeof t&&r)for(let n in r){let t=r[n];if("children"!==n&&t instanceof e)r[n]=t.value}return n.call(n,t,r,...o)}}const d=Symbol.dispose||Symbol.for("Symbol.dispose");let v;function y(e){if(v)v();v=e&&e.effect.S()}const h=()=>y();let S;const j=Promise.prototype.then.bind(Promise.resolve());Object.defineProperties(e.prototype,{$$typeof:{configurable:!0,value:b},type:{configurable:!0,value:function({data:e}){return e.value}},props:{configurable:!0,get(){return{data:this}}},ref:{configurable:!0,value:null}});let x=null,P=!1,$=null;const O=new Map;function k(e){if(!e)return 1;const n=O.get(e);if(void 0!==n)return n;let t;const r=e.useCallback.toString();if(e.useReducer===e.useEffect)t=1;else if(e.useEffect===e.useImperativeHandle)t=32;else if(/Invalid/.test(r))t=2;else if(/updateCallback/.test(r)||/\[0\]/.test(r)&&/\[1\]/.test(r)){let n=e.useReducer.toString();if(/rerenderReducer/.test(n)||/return\s*\[\w+,/.test(n))t=16;else t=8}else t=4;O.set(e,t);return t}!function(){Object.defineProperty(c.ReactCurrentDispatcher,"current",{get:()=>$,set(e){if(P){$=e;return}const n=k($),t=k(e);$=e;if(function(e,n){if(1&e&&28&n)return!0;else if(2&e||2&n)return!1;else if(16&n)return!0;else return!1}(n,t)){P=!0;x=function(){h();if(!S)S=j(()=>{S=void 0;h()});const e=u();if(null==e.current)e.current=function(){let e,n,t=0,o=r(function(){e=this});e.c=function(){t=t+1|0;if(n)n()};return{effect:e,subscribe(e){n=e;return function(){t=t+1|0;n=void 0;o()}},getSnapshot:()=>t,f(){h()},[d](){h()}}}();const n=e.current;l(n.subscribe,n.getSnapshot,n.getSnapshot);y(n);return n}();P=!1}else if(function(e,n){return Boolean(28&e&&1&n)}(n,t)){var o;null==(o=x)||o.f();x=null}}});!function(){const e=s,n=a;o.createElement=g(o.createElement);n.jsx&&(n.jsx=g(n.jsx));e.jsx&&(e.jsx=g(e.jsx));n.jsxs&&(n.jsxs=g(n.jsxs));e.jsxs&&(e.jsxs=g(e.jsxs));n.jsxDEV&&(n.jsxDEV=g(n.jsxDEV));e.jsxDEV&&(e.jsxDEV=g(e.jsxDEV))}()}();export{useComputed,useSignal,useSignalEffect};//# sourceMappingURL=signals.mjs.map
