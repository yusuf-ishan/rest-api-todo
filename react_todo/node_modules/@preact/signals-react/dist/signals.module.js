import{Signal as n,signal as e,computed as r,effect as t}from"@preact/signals-core";export{Signal,batch,computed,effect,signal,untracked}from"@preact/signals-core";import u,{useMemo as i,useRef as o,useEffect as f,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED as c}from"react";import{useSyncExternalStore as a}from"use-sync-external-store/shim/index.js";import l from"react/jsx-runtime";import s from"react/jsx-dev-runtime";var v=[],m=Symbol.for("react.element");Promise.prototype.then.bind(Promise.resolve());Object.defineProperties(n.prototype,{$$typeof:{configurable:!0,value:m},type:{configurable:!0,value:function(n){return n.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});function useSignal(n){return i(function(){return e(n)},v)}function useComputed(n){var e=o(n);e.current=n;return i(function(){return r(function(){return e.current()})},v)}function useSignalEffect(n){var e=o(n);e.current=n;f(function(){return t(function(){return e.current()})},v)}var p=Symbol.for("react.element");function b(e){if("function"!=typeof e)return e;else return function(r,t){if("string"==typeof r&&t)for(var u in t){var i=t[u];if("children"!==u&&i instanceof n)t[u]=i.value}return e.call.apply(e,[e,r,t].concat([].slice.call(arguments,2)))}}var g,d=Symbol.dispose||Symbol.for("Symbol.dispose");function y(n){if(g)g();g=n&&n.effect.S()}var h,S=function(){return y()},j=Promise.prototype.then.bind(Promise.resolve());Object.defineProperties(n.prototype,{$$typeof:{configurable:!0,value:p},type:{configurable:!0,value:function(n){return n.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var x=null,P=!1,$=null,O=new Map;function k(n){if(!n)return 1;var e,r=O.get(n);if(void 0!==r)return r;var t=n.useCallback.toString();if(n.useReducer===n.useEffect)e=1;else if(n.useEffect===n.useImperativeHandle)e=32;else if(/Invalid/.test(t))e=2;else if(/updateCallback/.test(t)||/\[0\]/.test(t)&&/\[1\]/.test(t)){var u=n.useReducer.toString();if(/rerenderReducer/.test(u)||/return\s*\[\w+,/.test(u))e=16;else e=8}else e=4;O.set(n,e);return e}!function(){Object.defineProperty(c.ReactCurrentDispatcher,"current",{get:function(){return $},set:function(n){if(!P){var e=k($),r=k(n);$=n;if(function(n,e){if(1&n&&28&e)return!0;else if(2&n||2&e)return!1;else if(16&e)return!0;else return!1}(e,r)){P=!0;x=function(){S();if(!h)h=j(function(){h=void 0;S()});var n=o();if(null==n.current)n.current=function(){var n,e,r,u=0,i=t(function(){e=this});e.c=function(){u=u+1|0;if(r)r()};return(n={effect:e,subscribe:function(n){r=n;return function(){u=u+1|0;r=void 0;i()}},getSnapshot:function(){return u},f:function(){S()}})[d]=function(){S()},n}();var e=n.current;a(e.subscribe,e.getSnapshot,e.getSnapshot);y(e);return e}();P=!1}else if(function(n,e){return Boolean(28&n&&1&e)}(e,r)){var u;null==(u=x)||u.f();x=null}}else $=n}});!function(){var n=l,e=s;u.createElement=b(u.createElement);e.jsx&&(e.jsx=b(e.jsx));n.jsx&&(n.jsx=b(n.jsx));e.jsxs&&(e.jsxs=b(e.jsxs));n.jsxs&&(n.jsxs=b(n.jsxs));e.jsxDEV&&(e.jsxDEV=b(e.jsxDEV));n.jsxDEV&&(n.jsxDEV=b(n.jsxDEV))}()}();export{useComputed,useSignal,useSignalEffect};//# sourceMappingURL=signals.module.js.map
